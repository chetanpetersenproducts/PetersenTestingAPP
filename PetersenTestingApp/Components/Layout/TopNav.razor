@inject UserService UserService

<div class="flex z-100 w-full bg-white px-4 top-0 sticky" style="box-shadow: 0 2px 4px rgba(0, 0, 0, 0.07); z-index:10000">
    <div class="mx-auto max-w-[1440px]  w-full">
        <div class="flex items-center justify-between">
            <div class="flex items-center">

                <div class="mx-auto  ">
                    <div class="flex  justify-between">
                        <div class="flex ">

                            <div class="hidden lg:flex lg:space-x-2">
                                
                                <a href="/" class="@GetActive("/") h-full self-center px-2 py-2 text-sm font-medium" aria-current="page">Home</a>
                                <a href="testing" class="@GetActive("testing") h-full self-center px-2 py-2 text-sm font-medium" aria-current="page">Testing</a>
                                

                            </div>
                        </div>

                    </div>
                </div>
            </div>

           


            <div class="flex">

                <a href="https://teamcentral.petersenproducts.com" class="hover:underline h-full self-center px-3 py-2 text-sm" aria-current="page">Return to Team Central</a>

                <div class="items-center flex" x-data="{ profiledropdown: false }">
                    <div class="ml-1 flex items-center mr-1">


                        <div class="relative ml-3 mr-2">


                            <span class="inline-flex h-6 w-6 items-center justify-center rounded-full bg-lochmara-900 text-white cursor-pointer" placeholder="@UserService.Name" x-on:click="profiledropdown = true">
                                <span class="text-xs font-medium leading-none text-black">@UserService.Name?.ToUpper().Substring(0, 1)</span>
                            </span>

                            <div x-show="profiledropdown" @click.away="profiledropdown = false" class="absolute right-0 z-20 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="user-menu-button" tabindex="-1">

                                <a href="/signout" class="block px-4 py-2 text-sm text-gray-700" role="menuitem" tabindex="-1" id="user-menu-item-2">Sign out</a>
                            </div>

                            <div class=" hidden inline-flex h-8 rounded px-1 py-0.5 items-center text-sm">
                                <button x-on:click="profiledropdown = true" type="button" class="relative flex max-w-xs items-center rounded border border-gray-700/25 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800" id="user-menu-button" aria-expanded="false" aria-haspopup="true">
                                    <span class="absolute -inset-1.5"></span>
                                    <span class="sr-only">Open user menu</span>
                                    <span class="inline-block h-6 w-6 overflow-hidden rounded-tl rounded-bl bg-gray-500/50">
                                        <svg class="h-full w-full text-white" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" />
                                        </svg>
                                    </span>

                                    <div class="ml-2 mr-1.5 text-gray-600">
                                        @UserService.Name
                                    </div>
                                </button>


                            </div>


                            
                        </div>
                    </div>
                </div>
            </div>
         
        </div>
    </div>

    <!-- Mobile menu, show/hide based on menu state. -->
    <div class="md:hidden" id="mobile-menu">
        <div class="space-y-1 px-2 pb-3 pt-2 sm:px-3">
            <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
            <a href="#" class="bg-gray-900 text-white block rounded-md px-3 py-2 text-base font-medium" aria-current="page">Dashboard</a>
            <a href="#" class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">Team</a>
            <a href="#" class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">Projects</a>
            <a href="#" class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">Calendar</a>
            <a href="#" class="text-gray-300 hover:bg-gray-700 hover:text-white block rounded-md px-3 py-2 text-base font-medium">Reports</a>
        </div>
        <div class="border-t border-gray-700 pb-3 pt-4">
            <div class="flex items-center px-5">
                <div class="flex-shrink-0">
                    <img class="h-10 w-10 rounded-full" src="" alt="">
                </div>
                <div class="ml-3">
                    <div class="text-base font-medium text-white">Tom Cook</div>
                    <div class="text-sm font-medium text-gray-400">tom@example.com</div>
                </div>
                <button type="button" class="relative ml-auto flex-shrink-0 rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800">
                    <span class="absolute -inset-1.5"></span>
                    <span class="sr-only">View notifications</span>
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0" />
                    </svg>
                </button>
            </div>
            <div class="mt-3 space-y-1 px-2">
                <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white">Your Profile</a>
                <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white">Settings</a>
                <a href="#" class="block rounded-md px-3 py-2 text-base font-medium text-gray-400 hover:bg-gray-700 hover:text-white">Sign out</a>
            </div>
        </div>
    </div>


</div>


@code {

    [Inject]
    NavigationManager NavigationManager { get; set; }

    [CascadingParameter] public RouteData routeData { get; set; }


    protected override void OnInitialized() => NavigationManager.LocationChanged += (s, e) => StateHasChanged();

    bool IsActive(string href, NavLinkMatch navLinkMatch = NavLinkMatch.Prefix)
    {



        var relativePath = NavigationManager.ToBaseRelativePath(NavigationManager.Uri).ToLower();
        return navLinkMatch == NavLinkMatch.All ? relativePath == href.ToLower() : (relativePath == "" && href == "/") || (href != "/" && relativePath.StartsWith(href.ToLower()));
    }

    string GetActive(string href, NavLinkMatch navLinkMatch = NavLinkMatch.Prefix) => IsActive(href, navLinkMatch) ? "border-lochmara-600 border-b-[3px] bg-[#eef0f1] text-lochmara-700" : "border-b-[3px]  border-transparent hover:border-b-[3px] hover:border-lochmara-900 focus:border-lochmara-900 focus:border-b-[3px] ";
    string GetActive(string[] hrefs, NavLinkMatch navLinkMatch = NavLinkMatch.Prefix) => hrefs.Any(x => IsActive(x, navLinkMatch)) ? "border-lochmara-600 border-b-[3px] bg-[#eef0f1] text-lochmara-700" : "border-b-[3px]  border-transparent hover:border-b-[3px] hover:border-lochmara-900 focus:border-lochmara-900 focus:border-b-[3px] ";


    string GetActive2(string href, NavLinkMatch navLinkMatch = NavLinkMatch.Prefix) => IsActive(href, navLinkMatch) ? "text-gray-300" : "text-gray-400";


}
